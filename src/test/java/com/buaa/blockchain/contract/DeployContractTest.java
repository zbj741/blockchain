package com.buaa.blockchain.contract;

import com.buaa.blockchain.config.CryptoType;
import com.buaa.blockchain.contract.model.CallMethod;
import com.buaa.blockchain.crypto.CryptoSuite;
import com.buaa.blockchain.crypto.keypair.CryptoKeyPair;
import com.buaa.blockchain.crypto.signature.SignatureResult;
import com.buaa.blockchain.entity.Transaction;
import com.buaa.blockchain.utils.PackageUtil;
import com.buaa.blockchain.utils.ReflectUtil;
import com.buaa.blockchain.vm.DataWord;
import com.buaa.blockchain.vm.utils.ByteArrayUtil;
import com.buaa.blockchain.vm.utils.HexUtil;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.google.common.collect.ObjectArrays;
import com.google.common.io.ByteStreams;
import lombok.extern.slf4j.Slf4j;
import org.junit.Before;
import org.junit.Test;

import java.io.IOException;
import java.io.InputStream;
import java.math.BigInteger;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * xxxx
 *
 * @author <a href="http://github.com/hackdapp">hackdapp</a>
 * @date 2021/1/13
 * @since JDK1.8
 */
@Slf4j
public class DeployContractTest {
    private String contractName = "EisContract";
    private String address = "0xb4f1f4be27eea76bdaec8f2ec86340a67a167e36";
    private String privateKey = "78f18327d1cd40a6cfc20899233e1bd2843c4f76ccef66d0386351dfc0c142ab";

    private CryptoKeyPair cryptoKeyPair;
    private CryptoSuite cryptoSuite;

    @Before
    public void before() throws IOException {
        cryptoSuite = new CryptoSuite(CryptoType.ECDSA_TYPE);
        cryptoKeyPair = cryptoSuite.createKeyPair(privateKey);
    }

    @Test
    public void testReadContract() throws IOException, ClassNotFoundException {
//        InputStream in = DeployContractTest.class.getResourceAsStream("/"+contractName+".class");
//        byte[] bytes = ByteStreams.toByteArray(in);
//        final String hexCode = HexUtil.toHexString(bytes);
//
//        log.debug("read contract bytes: {}", hexCode);


        String contractName = "EisContract";
        InputStream in = DeployContractTest.class.getResourceAsStream("/"+contractName+".class");
        byte[] byteData = ByteStreams.toByteArray(in);
        System.out.println(byteData.length);
        Class mainClass = ReflectUtil.getInstance().loadClass(contractName, byteData);

        Class[] classes = ObjectArrays.concat(mainClass, mainClass.getDeclaredClasses());
        byte[] bytes = PackageUtil.pack(classes);

        final String hexCode = HexUtil.toHexString(bytes);
        log.debug("read contract bytes: {}", hexCode);
    }

    @Test
    public void testLoadClass(){
        String hexCode = "053315069903d80d7203e5cafebabe0000003402020a009e01240500000000000000b40a005e012509000601260701270800a80b009b01280701290a00090124090006012a07012b0a000c012c0a0006012d0b009b012e0800ab090006012f0701300a0012012c0800ac09000601310701320a0016012c0800af09000601330701340a001a012c0800b009000601350701360a001e012c0800b109000601370701380a0022012c09007001390a0070013a07013b08013c0a0026013d0a0006013e08013f0701400a000601410a000601420801430a014401450a014601470801480a0149014a0a0146014b0b009b014c08014d0a0006014e07014f0a003701240a003701500a003701510701520a003b01240a003b01530a003701540a00370155063fc1eb851eb851ec0a007001560a007001570a003701580a0159015a0a0037015b0a0037015c063fb47ae147ae147b0a0037015d0a0037015e08015f0a003701600a003701610a003701620a003701630a003701640a003701650801660a005e01670801680a000601690a008d016a08016b0a0006016c08016d0a0006016e08016f0b009b01700701710a005e01720801730801740801750801760a00060177080178090179017a0a0146017b0a0179017c08017d08017e090006017f0701800a018101820a008d01830a007001840701850a007001860a006c01870801880a006c01890a006c018a0a0006018b08018c08018d05ffffffffffffffff0a0070018e0500000000000000c80a0070018f0801900a000601910801920a000601930701940a008301950801960a008301610a008301970a008301650a008d01980a007001990a0070019a0a008d019b07019c0a008d012407019d0a008f01240a008f019e08019f0a008f01a00a008f01a10801a20a000601a30701a40a009701240a009701a50a009701a60701a70701a80801a90701aa01000a49737375654f7264657201000c496e6e6572436c61737365730100094973737565506c616e0100085061794f7264657201000742616c616e636501000d4c494d49545f5041595f4e554d0100104c6a6176612f6c616e672f4c6f6e673b01000d49535355455f4147455f4d41500100025b4901000c42414c414e43455f545950450100124c6a6176612f6c616e672f537472696e673b01000d436f6e7374616e7456616c756501000e5041595f4f524445525f545950450100175041595f4f524445525f4d41505f555345525f545950450100165041595f4f524445525f4d41505f454e545f545950450800ad01000f49535355455f504c414e5f5459504501001049535355455f4f524445525f5459504501000c4e4558545f49445f5459504501000b62616c616e63655265706f01000f4c6a6176612f7574696c2f4d61703b0100095369676e61747572650100364c6a6176612f7574696c2f4d61703c4c6a6176612f6c616e672f4c6f6e673b4c456973436f6e74726163742442616c616e63653b3e3b01000c7061794f726465725265706f0100374c6a6176612f7574696c2f4d61703c4c6a6176612f6c616e672f4c6f6e673b4c456973436f6e7472616374245061794f726465723b3e3b0100107061794f72646572557365725265706f0100314c6a6176612f7574696c2f4d61703c4c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6c616e672f4c6f6e673b3e3b01000d6973737565506c616e5265706f0100384c6a6176612f7574696c2f4d61703c4c6a6176612f6c616e672f4c6f6e673b4c456973436f6e7472616374244973737565506c616e3b3e3b0100106973737565486973746f72795265706f01003b4c6a6176612f7574696c2f4d61703c4c6a6176612f6c616e672f537472696e673b4c456973436f6e74726163742449737375654f726465723b3e3b01000e6b657947656e65726174654d61700100334c6a6176612f7574696c2f4d61703c4c6a6176612f6c616e672f537472696e673b4c6a6176612f6c616e672f4c6f6e673b3e3b0100063c696e69743e010012284c6a6176612f7574696c2f4d61703b2956010004436f646501000f4c696e654e756d6265725461626c650100124c6f63616c5661726961626c655461626c650100047468697301000d4c456973436f6e74726163743b01000773746f7261676501000d537461636b4d61705461626c650701270701a70100104d6574686f64506172616d65746572730100076465706f736974010029284c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6d6174682f426967446563696d616c3b2956010006757365724964010006616d6f756e740100164c6a6176612f6d6174682f426967446563696d616c3b01000e6372656174655061794f72646572010039284c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6d6174682f426967446563696d616c3b2956010005656e74496401000a73616c61727942617365010006706572696f6401000a7061794f7264657249640100087061794f726465720100164c456973436f6e7472616374245061794f726465723b0701ab01000e7061794f72646572427955736572010023284c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6c616e672f4c6f6e673b295601000762616c616e63650100154c456973436f6e74726163742442616c616e63653b0100067061794e756d07014f07019c01000970617946696e69736801000a75736572416d6f756e7407017101000d7061794f726465724279456e74010033284c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6c616e672f4c6f6e673b295601000f6372656174654973737565506c616e010025284c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6c616e672f537472696e673b2956010008626972746864617901000361676501000149010005696e64657801000d69737375654d6f6e74684e756d0100096973737565506c616e0100174c456973436f6e7472616374244973737565506c616e3b010005697373756501003f284c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6d6174682f426967446563696d616c3b4c6a6176612f6d6174682f426967446563696d616c3b295601000e6c6173745965617241766756616c01000975736572496e64657801000d6e6174696f6e42616c616e636501000b7573657242616c616e6365010008626173696356616c0100077573657256616c01001269735375624e6174696f6e42616c616e63650100015a01000a69737375654f726465720100184c456973436f6e74726163742449737375654f726465723b07018007018501000a61646442616c616e636501000a73756242616c616e6365010013667265657a654e6174696f6e42616c616e6365010019284c6a6176612f6d6174682f426967446563696d616c3b2956010015756e667265657a654e6174696f6e42616c616e636501000d667265657a6542616c616e636501000f756e667265657a6542616c616e636501000a67657442616c616e6365010027284c6a6176612f6c616e672f4c6f6e673b294c456973436f6e74726163742442616c616e63653b0100156372656174655061794f72646572557365724b6579010036284c6a6176612f6c616e672f537472696e673b4c6a6176612f6c616e672f4c6f6e673b294c6a6176612f6c616e672f537472696e673b0100146372656174655061794f72646572456e744b65790100156372656174654973737565486973746f72794b65790100126e6578745061794f726465724e657874496401000328294a0100096e6578744b65794964010015284c6a6176612f6c616e672f537472696e673b294a0100066e65787449640100076b6579547970650100036e6f7701000b6361737453746f72616765010052284c6a6176612f6c616e672f4f626a6563743b4c636f6d2f666173746572786d6c2f6a61636b736f6e2f636f72652f747970652f547970655265666572656e63653b294c6a6176612f7574696c2f4d61703b0100046a736f6e010001650100344c636f6d2f666173746572786d6c2f6a61636b736f6e2f636f72652f4a736f6e50726f63657373696e67457863657074696f6e3b010004646174610100124c6a6176612f6c616e672f4f626a6563743b01000d747970655265666572656e636501002f4c636f6d2f666173746572786d6c2f6a61636b736f6e2f636f72652f747970652f547970655265666572656e63653b01000c6f626a6563744d617070657201002d4c636f6d2f666173746572786d6c2f6a61636b736f6e2f6461746162696e642f4f626a6563744d61707065723b0701400701ac0701a40701a80100083c636c696e69743e01000328295601000a536f7572636546696c65010010456973436f6e74726163742e6a6176610c00c001210c01ad01ae0c00a400a501000b456973436f6e74726163740c01af01b00100116a6176612f7574696c2f486173684d61700c00b200b301000d456973436f6e747261637424310c00c001b10c011101120c01b201b30c00b600b301000d456973436f6e747261637424320c00b800b301000d456973436f6e747261637424330c00ba00b301000d456973436f6e747261637424340c00bc00b301000d456973436f6e747261637424350c00be00b301000d456973436f6e747261637424360c01b400d00c01b501b6010038636f6d2f627561612f626c6f636b636861696e2f636f6e74726163742f636f6d706f6e656e742f436f6e7472616374457863657074696f6e010016e58585e580bce98791e9a29de5ba94e5a4a7e4ba8e300c00c001b70c00fd00cd01000d4445504f5349545f4556454e540100106a6176612f6c616e672f4f626a6563740c0110010b0c01b801b9010016e7bcb4e8b4b9e59fbae695b0e5ba94e5a4a7e4ba8e300701ba0c01bb01bc0701bd0c011001be010006797979794d4d0701bf0c01c001c10c01c201c30c01c401c501001be69cace69c9fe5be85e7bcb4e6988ee7bb86e5b7b2e7949fe688900c010a010b010014456973436f6e7472616374245061794f726465720c01c601b70c01c7010001000e6a6176612f7574696c2f446174650c01c8010b0c01c901ca0c01cb01ca0c01ad01cc0c01cd01ce0c01cf01000701d00c01ad01d10c01d201d30c01d401ca0c01d501000c01d601d30100164352454154455f5041595f4f524445525f4556454e540c01d701d80c01d901da0c01db01da0c01dc01d80c01dd01da0c01de01d8010012e7bcb4e5ad98e58d95e4b88de5ad98e59ca80c01df01c5010021e7bcb4e5ad98e58d95e4b88ee7bcb4e8b4b9e794a8e688b7e4b88de4b880e887b40c010401050c01e001d8010012e5b890e688b7e4bd99e9a29de4b88de8b6b30c00fe00cd0100095041595f4556454e540c010200cd01000c465245455a455f4556454e540c01e101b301000e6a6176612f6c616e672f4c6f6e670c01e2010b0100145041595f4f524445525f555345525f4556454e54010011e5b7b2e7bcb4e7bab3e6bba13135e5b9b401000a5041595f46494e495348010025e585ace58fb8e58f8ae59198e5b7a54964e4b88e5061794f72646572e4b88de4b880e887b40c00ff01000100135041595f4f524445525f454e545f4556454e540701e30c01e401e50c01e601e70c01e801e901001be5b9b4e9be84e4b88de7aca6e59088e98080e4bc91e69da1e4bbb601000ee69caae7bcb4e6bba13135e5b9b40c00a600a7010015456973436f6e7472616374244973737565506c616e0701ea0c01ad01eb0c01ec01d80c01ad01ed0100146a6176612f6d6174682f426967446563696d616c0c01ee01ef0c00c001f00100174352454154455f49535355455f504c414e5f4556454e540c01f101f20c01f301d80c01090107010018e69cace69c9fe585bbe88081e98791e5b7b2e58f91e694be010015e69caae5889be5bbbae98080e4bc91e8aea1e588920c01f401ce0c01ee01ce010018e7bb9fe7adb9e5b890e688b7e98791e9a29de4b88de8b6b30c0101010001000e554e465245455a455f4556454e540c010300cd010016456973436f6e74726163742449737375654f726465720c00c000f001000b49535355455f4556454e540c01f501d80c00fd01000c01f601d80c01f701d80c01f80100010013456973436f6e74726163742442616c616e63650100176a6176612f6c616e672f537472696e674275696c6465720c01f901fa0100012d0c01f901fb0c01fc01fd01000c5041595f4f524445525f49440c010c010d01002b636f6d2f666173746572786d6c2f6a61636b736f6e2f6461746162696e642f4f626a6563744d61707065720c01fe01ff0c0200020101000d6a6176612f7574696c2f4d6170010032636f6d2f666173746572786d6c2f6a61636b736f6e2f636f72652f4a736f6e50726f63657373696e67457863657074696f6e010018e58aa0e8bdbde59088e7baa6e695b0e68daee587bae99499010030636f6d2f627561612f626c6f636b636861696e2f636f6e74726163742f636f6d706f6e656e742f49436f6e74726163740100106a6176612f6c616e672f537472696e6701002d636f6d2f666173746572786d6c2f6a61636b736f6e2f636f72652f747970652f547970655265666572656e636501000776616c75654f66010013284a294c6a6176612f6c616e672f4c6f6e673b010003676574010026284c6a6176612f6c616e672f4f626a6563743b294c6a6176612f6c616e672f4f626a6563743b010010284c456973436f6e74726163743b2956010003707574010038284c6a6176612f6c616e672f4f626a6563743b4c6a6176612f6c616e672f4f626a6563743b294c6a6176612f6c616e672f4f626a6563743b0100034f4e45010009636f6d70617265546f010019284c6a6176612f6d6174682f426967446563696d616c3b2949010015284c6a6176612f6c616e672f537472696e673b29560100034c4f47010028284c6a6176612f6c616e672f537472696e673b5b4c6a6176612f6c616e672f4f626a6563743b29560100106a6176612f74696d652f5a6f6e65496401000d73797374656d44656661756c7401001428294c6a6176612f74696d652f5a6f6e6549643b0100136a6176612f74696d652f4c6f63616c44617465010029284c6a6176612f74696d652f5a6f6e6549643b294c6a6176612f74696d652f4c6f63616c446174653b0100226a6176612f74696d652f666f726d61742f4461746554696d65466f726d61747465720100096f665061747465726e010038284c6a6176612f6c616e672f537472696e673b294c6a6176612f74696d652f666f726d61742f4461746554696d65466f726d61747465723b010006666f726d6174010038284c6a6176612f74696d652f666f726d61742f4461746554696d65466f726d61747465723b294c6a6176612f6c616e672f537472696e673b01000b636f6e7461696e734b6579010015284c6a6176612f6c616e672f4f626a6563743b295a010009736574506572696f6401000d73657453616c6172794261736501000767657454696d6501000c73657454696d657374616d70010013284c6a6176612f6c616e672f4c6f6e673b2956010008736574456e7449640100192844294c6a6176612f6d6174682f426967446563696d616c3b0100086d756c7469706c7901002e284c6a6176612f6d6174682f426967446563696d616c3b294c6a6176612f6d6174682f426967446563696d616c3b01000c736574456e74416d6f756e740100116a6176612f6c616e672f426f6f6c65616e010016285a294c6a6176612f6c616e672f426f6f6c65616e3b01000c736574456e74537461747573010016284c6a6176612f6c616e672f426f6f6c65616e3b295601000973657455736572496401000d73657455736572416d6f756e7401000d7365745573657253746174757301000d67657453616c6172794261736501001828294c6a6176612f6d6174682f426967446563696d616c3b01000c67657454696d657374616d7001001228294c6a6176612f6c616e672f4c6f6e673b010008676574456e74496401000c676574456e74416d6f756e7401000967657455736572496401000d67657455736572416d6f756e74010006657175616c73010009676574416d6f756e7401000c6765744f7244656661756c740100096c6f6e6756616c756501001d6a6176612f74696d652f74656d706f72616c2f4368726f6e6f556e6974010005594541525301001f4c6a6176612f74696d652f74656d706f72616c2f4368726f6e6f556e69743b010005706172736501002f284c6a6176612f6c616e672f4368617253657175656e63653b294c6a6176612f74696d652f4c6f63616c446174653b0100076265747765656e01003d284c6a6176612f74696d652f74656d706f72616c2f54656d706f72616c3b4c6a6176612f74696d652f74656d706f72616c2f54656d706f72616c3b294a0100116a6176612f6c616e672f496e74656765720100162849294c6a6176612f6c616e672f496e74656765723b01000f676574467265657a65416d6f756e74010019284a294c6a6176612f6d6174682f426967446563696d616c3b010006646976696465010030284c6a6176612f6d6174682f426967446563696d616c3b4949294c6a6176612f6d6174682f426967446563696d616c3b01003f284c6a6176612f6c616e672f496e74656765723b4c6a6176612f6c616e672f496e74656765723b4c6a6176612f6d6174682f426967446563696d616c3b295601000667657441676501001528294c6a6176612f6c616e672f496e74656765723b01000e6765744d6f6e7468416d6f756e7401000361646401000e6765744261736963416d6f756e740100036162730100066e6567617465010010616464467265657a6542616c616e6365010006617070656e6401002d284c6a6176612f6c616e672f537472696e673b294c6a6176612f6c616e672f537472696e674275696c6465723b01002d284c6a6176612f6c616e672f4f626a6563743b294c6a6176612f6c616e672f537472696e674275696c6465723b010008746f537472696e6701001428294c6a6176612f6c616e672f537472696e673b010012777269746556616c75654173537472696e67010026284c6a6176612f6c616e672f4f626a6563743b294c6a6176612f6c616e672f537472696e673b0100097265616456616c7565010055284c6a6176612f6c616e672f537472696e673b4c636f6d2f666173746572786d6c2f6a61636b736f6e2f636f72652f747970652f547970655265666572656e63653b294c6a6176612f6c616e672f4f626a6563743b00210006009e0000000f001200a400a50000001a00a600a70000001a00a800a9000100aa000000020007001a00ab00a9000100aa000000020010001a00ac00a9000100aa000000020014001a00ad00a9000100aa0000000200ae001a00af00a9000100aa000000020018001a00b000a9000100aa00000002001c001a00b100a9000100aa000000020020000200b200b3000100b40000000200b5000200b600b3000100b40000000200b7000200b800b3000100b40000000200b9000200ba00b3000100b40000000200bb000200bc00b3000100b40000000200bd000200be00b3000100b40000000200bf0017000100c000c1000200c20000023f00060002000001832ab700012a140002b80004b500052b1207b900080200c700112abb000959b7000ab5000ba7001b2a2a2b1207b900080200bb000c592ab7000db7000eb5000b2b12072ab4000bb9000f0300572b1210b900080200c700112abb000959b7000ab50011a7001b2a2a2b1210b900080200bb0012592ab70013b7000eb500112b12102ab40011b9000f0300572b1214b900080200c700112abb000959b7000ab50015a7001b2a2a2b1214b900080200bb0016592ab70017b7000eb500152b12142ab40015b9000f0300572b1218b900080200c700112abb000959b7000ab50019a7001b2a2a2b1218b900080200bb001a592ab7001bb7000eb500192b12182ab40019b9000f0300572b121cb900080200c700112abb000959b7000ab5001da7001b2a2a2b121cb900080200bb001e592ab7001fb7000eb5001d2b121c2ab4001db9000f0300572b1220b900080200c700112abb000959b7000ab50021a7001b2a2a2b1220b900080200bb0022592ab70023b7000eb500212b12202ab40021b9000f030057b10000000300c30000006e001b0000003200040019000e00330019003400270036003f0039004c003b0057003c0065003e007d0041008a00430095004400a3004600bb004900c8004b00d3004c00e1004e00f900510106005301110054011f0056013700590144005b014f005c015d005e017500620182006300c40000001600020000018300c500c600000000018300c700b3000100c80000001a000cff002700020700c90700ca0000172517251725172517251700cb000000050100c70000000100cc00cd000200c200000093000700030000003b2cc6000d2cb20024b600259d000dbb0026591227b70028bf2a2b2cb700292a122a06bd002b59032b5359042ab7002cb800045359052c53b6002db10000000300c30000001600050000006b000e006c0018006e001e0070003a007100c40000002000030000003b00c500c600000000003b00ce00a500010000003b00cf00d0000200c80000000400020e0900cb000000090200ce000000cf0000000100d100d2000200c2000001dc00060007000001022dc6000d2db20024b600259d000dbb002659122eb70028bfb8002fb800301231b80032b600333a042ab400152bb90034020099000dbb0026591235b70028bf2ab70036b800043a05bb003759b700383a0619061904b6003919062db6003a1906bb003b59b7003cb6003db80004b6003e19062cb6003f19062d140040b80042b60043b60044190603b80045b6004619062bb6004719062d140048b80042b60043b6004a190603b80045b6004b2ab4001119051906b9000f0300572a124c1008bd002b5903190553590419045359051906b6004d5359061906b6004e5359071906b6004f5359081906b60050535910061906b60051535910071906b6005253b6002db10000000300c30000006a001a00000077000e00780018007a0028007b0035007c003f007f004800800051008100580082005e0083007000840076008500850086008e00870094008800a3008900ac008a00ba008c00d0008f00d8009000e0009100e8009200f1009300fa009400fe008c0101009600c40000004800070000010200c500c600000000010200ce00a500010000010200d300a500020000010200d400d00003002800da00d500a90004004800ba00d600a50005005100b100d700d8000600c80000000a00030e09fc00260700d900cb0000000d0300ce000000d3000000d40000000100da00db000200c2000001d500070006000001142ab400112bb900080200c000374e2dc7000dbb0026591253b70028bf2db600512cb600549a000dbb0026591255b70028bf2a2cb700563a041904b600572db60052b6002502a0000dbb0026591258b70028bf2a2c2db60052b700592a125a06bd002b59032c5359042db60052535905bb003b59b7003cb6003db8000453b6002d2a2c2db60052b7005b2a125c06bd002b59032c5359042db60052535905bb003b59b7003cb6003db8000453b6002d2ab400152c09b80004b9005d0300c0005e3a052ab400152c1905b6005f0a61b80004b9000f0300572d04b80045b6004b2ab400112b2db9000f0300572a126007bd002b59032b5359042c5359052db60052535906bb003b59b7003cb6003db8000453b6002db10000000300c30000005600150000009c000e009d0012009e001c00a0002700a1003100a3003800a4004800a5005200a8005b00a9008000aa008900ab00ae00ad00c100ae00d600b000de00b100ea00b200fc00b5010900b6011000b2011300b800c40000003e00060000011400c500c600000000011400d600a500010000011400ce00a50002000e010600d700d80003003800dc00dc00dd000400c1005300de00a5000500c80000000f0003fc001c0700df14fc00200700e000cb000000090200d6000000ce0000000100e100cd000200c20000016f00090005000000d12ab400152b09b80004b9005d0300c0005e4e2db6005f2ab40005b6005f949b000dbb0026591261b70028bf2a2bb700563a041904b600572cb6002502a0000dbb0026591258b70028bf2a2b2cb700592a125a06bd002b59032b5359042c535905bb003b59b7003cb6003db8000453b6002d2a2b2cb7005b2a125c06bd002b59032b5359042c535905bb003b59b7003cb6003db8000453b6002d2ab400152b2ab40005b9000f0300572a126207bd002b59032b5359042d5359052ab40005b6005f2db6005f65b800045359062c53b6002db10000000300c30000003e000f000000c1001200c2002100c3002b00c5003200c6003f00c7004900ca004f00cb007100cc007700cd009900cf00a800d000bd00d300cd00d000d000d500c4000000340005000000d100c500c60000000000d100ce00a50001000000d100e200d00002001200bf00de00a500030032009f00dc00dd000400c80000000e0002fc002b0700e3fc001d0700e000cb000000090200ce000000e20000000100e400e5000200c2000001bc00070006000001022ab400112bb900080200c000373a041904c7000dbb0026591253b70028bf1904b6004f2cb6005499000f1904b600512db600549a000dbb0026591263b70028bf2a2cb700563a051905b600571904b60050b6002502a0000dbb0026591258b70028bf2a2c1904b60050b700592a125a06bd002b59032c5359041904b60050535905bb003b59b7003cb6003db8000453b6002d2a1904b60050b700642a125c06bd002b59032c5359041904b60050535905bb003b59b7003cb6003db8000453b6002d190404b80045b600462ab400112b1904b9000f0300572a126507bd002b59032b5359042c5359051904b60050535906bb003b59b7003cb6003db8000453b6002db10000000300c30000004e0013000000db000f00dc001400dd001e00df003600e0004000e2004700e3005800e4006200e7006c00e8009200e9009b00ea00c100ec00ca00ed00d700ee00ea00f100f700f200fe00ee010100f400c40000003e00060000010200c500c600000000010200d600a500010000010200d300a500020000010200ce00a50003000f00f300d700d80004004700bb00dc00dd000500c8000000100004fc001e0700df1709fc00210700e000cb0000000d0300d6000000d3000000ce0000000100e600e7000200c20000019e00080009000000cfb200662cb80067b8002fb80030b60068883e1d1028a2000dbb0026591269b70028bf2ab400152b09b80004b9005d0300c0005e3a041904b6005f2ab40005b6005f949c000dbb002659126ab70028bf1d102870b2006bbea1000cb2006bbe0464a700071d1028703605b2006b15052e36062a2bb700563a07bb006c591db8006d1506b8006d1907b6006e150685b8006f071006b60071b700723a082ab400192b1908b9000f0300572a127307bd002b59032b5359041908b600745359051506b8006d5359061908b6007553b6002db10000000300c3000000460011000000fd001200fe001800ff002201010035010200450103004f010600690107007101090078010a009b010b00a8010d00b7010f00bf011000c7011100cb010d00ce011300c40000005c0009000000cf00c500c60000000000cf00ce00a50001000000cf00e800a90002001200bd00e900ea00030035009a00de00a500040069006600eb00ea00050071005e00ec00ea00060078005700dc00dd0007009b003400ed00ee000800c80000000f0004fc002201fc002c0700e313430100cb000000090200ce000000e80000000100ef00f0000200c2000003250007000d000001c3b8002fb800301231b80032b600333a042ab4001d2a19042bb70076b90034020099000dbb0026591277b70028bf2ab400192bb900080200c0006c3a051905c7000dbb0026591278b70028bf2ab400152b09b80004b9005d0300c0005e3a062a140079b80004b700563a072a2bb700563a082c2db6007b1906b6005fb8006fb6004314007cb8006fb6007e3a091905b600753a0a03360b1908b6006e190ab6002502a0002304360b1907b6006e1909190ab6007bb6002502a0000dbb002659127fb70028bf1907b6006e1909b6002502a0000dbb002659127fb70028bf150b9900342a190ab700802a128106bd002b5903140079b80004535904190a535905bb003b59b7003cb6003db8000453b6002da7002d2a2b190ab700822a128106bd002b59032b535904190a535905bb003b59b7003cb6003db8000453b6002d2a1909b700802a128106bd002b5903140079b800045359041909535905bb003b59b7003cb6003db8000453b6002dbb008359bb003b59b7003cb6003db800041909190ab700843a0c2ab4001d2a19042bb70076190cb9000f0300572a128508bd002b59032b5359041904535905190cb60086535906190cb60087535907190cb6008853b6002db10000000300c3000000860021000001190010011a0023011b002d011d003c011e0041011f004b0121005e0122006a012300710124008c0125009301270096012800a4012900a7012a00ba012b00c4012e00d2012f00dc013200e1013300e701340112013601190137013c01390142013a016a013d0184013e0197013f01ab014201b3014301bb014401bf013f01c2014600c400000084000d000001c300c500c60000000001c300ce00a50001000001c300f100d00002000001c300f200d00003001001b300d500a90004003c018700ed00ee0005005e016500de00a50006006a015900f300dd00070071015200f400dd0008008c013700f500d000090093013000f600d0000a0096012d00f700f8000b0184003f00f900fa000c00c80000003a0006fc002d0700d9fc001d0700fbff0078000c0700c90700e30700fc0700fc0700d90700fb0700e30700e00700e00700fc0700fc01000017352900cb0000000d0300ce000000f1000000f20000000200fd00cd000200c20000006c00030004000000182a2bb700564e2d2cb600892ab4000b2b2db9000f030057b10000000200c3000000120004000001490006014a000b014b0017014c00c40000002a00040000001800c500c600000000001800ce00a500010000001800cf00d000020006001200dc00dd000300cb000000090200ce000000cf0000000200fe00cd000200c200000072000300040000001e2a2bb700564e2d2cb6008ab6008bb600892ab4000b2b2db9000f030057b10000000200c30000001200040000014f0006015000110151001d015200c40000002a00040000001e00c500c600000000001e00ce00a500010000001e00cf00d000020006001800dc00dd000300cb000000090200ce000000cf0000000200ff0100000200c200000044000300020000000c2a140079b800042bb7005bb10000000200c30000000a000200000155000b015600c40000001600020000000c00c500c600000000000c00cf00d0000100cb000000050100cf0000000201010100000200c200000044000300020000000c2a140079b800042bb70082b10000000200c30000000a000200000159000b015a00c40000001600020000000c00c500c600000000000c00cf00d0000100cb000000050100cf00000002010200cd000200c20000006f000300040000001b2a2bb700564e2d2cb6008ab6008c2ab4000b2b2db9000f030057b10000000200c30000001200040000015d0006015e000e015f001a016000c40000002a00040000001b00c500c600000000001b00ce00a500010000001b00cf00d000020006001500dc00dd000300cb000000090200ce000000cf00000002010300cd000200c200000072000300040000001e2a2bb700564e2d2cb6008ab6008bb6008c2ab4000b2b2db9000f030057b10000000200c3000000120004000001630006016400110165001d016600c40000002a00040000001e00c500c600000000001e00ce00a500010000001e00cf00d000020006001800dc00dd000300cb000000090200ce000000cf0000000201040105000200c20000008400030003000000282ab4000b2bb900080200c0008d4d2cc70017bb008d59b7008e4d2ab4000b2b2cb9000f0300572cb00000000300c300000016000500000169000e016a0012016b001a016c0026016e00c40000002000030000002800c500c600000000002800ce00a50001000e001a00dc00dd000200c8000000080001fc00260700e000cb000000050100ce0000000201060107000200c2000000560002000300000018bb008f59b700902bb600911292b600912cb60093b60094b00000000200c30000000600010000017200c40000002000030000001800c500c600000000001800d500a900010000001800ce00a5000200cb000000090200d5000000ce0000000201080107000200c2000000560002000300000018bb008f59b700902bb600911292b600912cb60093b60094b00000000200c30000000600010000017600c40000002000030000001800c500c600000000001800d500a900010000001800d300a5000200cb000000090200d5000000d30000000201090107000200c2000000560002000300000018bb008f59b700902bb600911292b600912cb60093b60094b00000000200c30000000600010000017a00c40000002000030000001800c500c600000000001800d500a900010000001800ce00a5000200cb000000090200d5000000ce00000002010a010b000100c20000003100020001000000072a1295b70096ad0000000200c30000000600010000017e00c40000000c00010000000700c500c600000002010c010d000200c2000000a3000400030000003c2ab400212bb900080200c7000b09b800044da700192ab400212bb900080200c0005eb6005f0a61b800044d2ab400212b2cb9000f0300572cb6005fad0000000300c300000016000500000183000d018400150186002b01880037018900c40000002a000400120003010e00a500020000003c00c500c600000000003c010f00a90001002b0011010e00a5000200c800000009000215fc00150700e300cb0000000501010f000000020110010b000100c200000035000200010000000bbb003b59b7003cb6003dad0000000200c30000000600010000018d00c40000000c00010000000b00c500c60000000201110112000200c2000000b80003000500000026bb009759b700984e2d2bb600993a042d19042cb6009ac0009bb03a04bb002659129db70028bf000100080019001a009c000300c30000001600050000019100080193000f0194001a0195001c019600c40000003e0006000f000b011300a90004001c000a0114011500040000002600c500c6000000000026011601170001000000260118011900020008001e011a011b000300c8000000180001ff001a00040700c907011c07011d07011e000107011f00cb00000009020116000001180000000801200121000100c2000000e800040000000000d0101fbc0a59031100e94f59041100e64f59051100e24f59061100df4f59071100dc4f59081100d84f5910061100d44f5910071100d04f5910081100cc4f5910091100c74f59100a1100c34f59100b1100be4f59100c1100b94f59100d1100b44f59100e1100af4f59100f1100aa4f5910101100a44f59101111009e4f5910121100984f5910131100914f591014103c4f591015103d4f591016103e4f591017103f4f59101810404f59101910414f59101a10424f59101b10434f59101c10444f59101d10454f59101e10464fb3006bb10000000100c30000000600010000001c0002012200000002012300a000000052000a00830006009f0009006c000600a100090037000600a20009008d000600a3000a0022000000000000001e000000000000001a00000000000000160000000000000012000000000000000c000000000000cafebabe00000034004f0a001600300900090031090009003209000900330700340800350700360a000700300700380a0039003a0a0007003b08003c0a0007003d08003e0a0005003f0800400a000700410a000500420800430800440a0005003d07004501000974696d657374616d700100104c6a6176612f6c616e672f4c6f6e673b01000b6261736963416d6f756e740100164c6a6176612f6d6174682f426967446563696d616c3b01000a75736572416d6f756e740100063c696e69743e010003282956010004436f646501000f4c696e654e756d6265725461626c650100124c6f63616c5661726961626c655461626c650100047468697301000a49737375654f7264657201000c496e6e6572436c61737365730100184c456973436f6e74726163742449737375654f726465723b01003f284c6a6176612f6c616e672f4c6f6e673b4c6a6176612f6d6174682f426967446563696d616c3b4c6a6176612f6d6174682f426967446563696d616c3b29560100104d6574686f64506172616d657465727301000c67657454696d657374616d7001001228294c6a6176612f6c616e672f4c6f6e673b01000e6765744261736963416d6f756e7401001828294c6a6176612f6d6174682f426967446563696d616c3b01000d67657455736572416d6f756e74010008746f537472696e6701001428294c6a6176612f6c616e672f537472696e673b01000a536f7572636546696c65010010456973436f6e74726163742e6a6176610c001c001d0c001700180c0019001a0c001b001a0100166a6176612f7574696c2f537472696e674a6f696e65720100022c200100176a6176612f6c616e672f537472696e674275696c646572070046010016456973436f6e74726163742449737375654f726465720700470c0048002d0c0049004a0100015b0c002c002d0100015d0c001c004b01000c6261736963416d6f756e743d0c0049004c0c004d004e01000a74696d657374616d703d01000b75736572416d6f756e743d0100106a6176612f6c616e672f4f626a65637401000b456973436f6e747261637401000f6a6176612f6c616e672f436c61737301000d67657453696d706c654e616d65010006617070656e6401002d284c6a6176612f6c616e672f537472696e673b294c6a6176612f6c616e672f537472696e674275696c6465723b01004b284c6a6176612f6c616e672f4368617253657175656e63653b4c6a6176612f6c616e672f4368617253657175656e63653b4c6a6176612f6c616e672f4368617253657175656e63653b295601002d284c6a6176612f6c616e672f4f626a6563743b294c6a6176612f6c616e672f537472696e674275696c6465723b010003616464010032284c6a6176612f6c616e672f4368617253657175656e63653b294c6a6176612f7574696c2f537472696e674a6f696e65723b00210009001600000003000200170018000000020019001a00000002001b001a000000060001001c001d0001001e0000003300010001000000052ab70001b100000002001f0000000a0002000002420004024300200000000c0001000000050021002400000001001c00250002001e0000006c00020004000000142ab700012a2bb500022a2cb500032a2db50004b100000002001f000000160005000002450004024600090247000e02480013024900200000002a00040000001400210024000000000014001700180001000000140019001a000200000014001b001a000300260000000d030017000000190000001b00000001002700280001001e0000002f00010001000000052ab40002b000000002001f0000000600010000024c00200000000c00010000000500210024000000010029002a0001001e0000002f00010001000000052ab40003b000000002001f0000000600010000025000200000000c0001000000050021002400000001002b002a0001001e0000002f00010001000000052ab40004b000000002001f0000000600010000025400200000000c0001000000050021002400000001002c002d0001001e000000af0005000100000071bb0005591206bb000759b700081209b6000ab6000b120cb6000bb6000d120eb7000fbb000759b700081210b6000b2ab40003b60011b6000db60012bb000759b700081213b6000b2ab40002b60011b6000db60012bb000759b700081214b6000b2ab40004b60011b6000db60012b60015b000000002001f0000001a00060000025a0038025b0051025c006a025d006d025e0070025a00200000000c0001000000710021002400000002002e00000002002f00230000000a00010009003700220009cafebabe0000003400260a0006001e090005001f090005002009000500210700230700240100036167650100134c6a6176612f6c616e672f496e74656765723b01000d69737375654d6f6e74684e756d01000b6d6f6e7468416d6f756e740100164c6a6176612f6d6174682f426967446563696d616c3b0100063c696e69743e010003282956010004436f646501000f4c696e654e756d6265725461626c650100124c6f63616c5661726961626c655461626c65010004746869730100094973737565506c616e01000c496e6e6572436c61737365730100174c456973436f6e7472616374244973737565506c616e3b01003f284c6a6176612f6c616e672f496e74656765723b4c6a6176612f6c616e672f496e74656765723b4c6a6176612f6d6174682f426967446563696d616c3b29560100104d6574686f64506172616d657465727301000667657441676501001528294c6a6176612f6c616e672f496e74656765723b01000e6765744d6f6e7468416d6f756e7401001828294c6a6176612f6d6174682f426967446563696d616c3b01001067657449737375654d6f6e74684e756d01000a536f7572636546696c65010010456973436f6e74726163742e6a6176610c000c000d0c000700080c000900080c000a000b070025010015456973436f6e7472616374244973737565506c616e0100106a6176612f6c616e672f4f626a65637401000b456973436f6e747261637400210005000600000003000200070008000000020009000800000002000a000b000000050001000c000d0001000e0000003300010001000000052ab70001b100000002000f0000000a0002000002270004022800100000000c0001000000050011001400000001000c00150002000e0000006c00020004000000142ab700012a2bb500022a2cb500032a2db50004b100000002000f0000001600050000022a0004022b0009022c000e022d0013022e00100000002a000400000014001100140000000000140007000800010000001400090008000200000014000a000b000300160000000d030007000000090000000a00000001001700180001000e0000002f00010001000000052ab40002b000000002000f0000000600010000023100100000000c00010000000500110014000000010019001a0001000e0000002f00010001000000052ab40004b000000002000f0000000600010000023500100000000c0001000000050011001400000001001b00180001000e0000002f00010001000000052ab40003b000000002000f0000000600010000023900100000000c0001000000050011001400000002001c00000002001d00130000000a00010005002200120009cafebabe0000003400840a0023005809000f005909000f005a09000f005b09000f005c09000f005d09000f005e09000f005f09000f006009000f00610700620800630700640a000d00580700660a006700680a000d006908006a0a000d006b08006c0a000b006d08006e0a000d006f0a000b00700800710800720800730800740800750800760800770800780800790a000b006b07007a010006706572696f640100124c6a6176612f6c616e672f537472696e673b01000974696d657374616d700100104c6a6176612f6c616e672f4c6f6e673b01000a73616c617279426173650100164c6a6176612f6d6174682f426967446563696d616c3b01000675736572496401000a75736572416d6f756e7401000a757365725374617475730100134c6a6176612f6c616e672f426f6f6c65616e3b010005656e744964010009656e74416d6f756e74010009656e745374617475730100063c696e69743e010003282956010004436f646501000f4c696e654e756d6265725461626c650100124c6f63616c5661726961626c655461626c65010004746869730100085061794f7264657201000c496e6e6572436c61737365730100164c456973436f6e7472616374245061794f726465723b010009676574506572696f6401001428294c6a6176612f6c616e672f537472696e673b010009736574506572696f64010015284c6a6176612f6c616e672f537472696e673b29560100104d6574686f64506172616d657465727301000c67657454696d657374616d7001001228294c6a6176612f6c616e672f4c6f6e673b01000c73657454696d657374616d70010013284c6a6176612f6c616e672f4c6f6e673b295601000d67657453616c6172794261736501001828294c6a6176612f6d6174682f426967446563696d616c3b01000d73657453616c61727942617365010019284c6a6176612f6d6174682f426967446563696d616c3b295601000967657455736572496401000973657455736572496401000d67657455736572416d6f756e7401000d73657455736572416d6f756e7401000d6765745573657253746174757301001528294c6a6176612f6c616e672f426f6f6c65616e3b01000d73657455736572537461747573010016284c6a6176612f6c616e672f426f6f6c65616e3b2956010008676574456e744964010008736574456e74496401000c676574456e74416d6f756e7401000c736574456e74416d6f756e7401000c676574456e7453746174757301000c736574456e74537461747573010008746f537472696e6701000a536f7572636546696c65010010456973436f6e74726163742e6a6176610c003100320c002400250c002600270c002800290c002a00270c002b00290c002c002d0c002e00270c002f00290c0030002d0100166a6176612f7574696c2f537472696e674a6f696e65720100022c200100176a6176612f6c616e672f537472696e674275696c64657207007b010014456973436f6e7472616374245061794f7264657207007c0c007d003b0c007e007f0100015b0c0055003b0100015d0c0031008001000a656e74416d6f756e743d0c007e00810c00820083010006656e7449643d01000a656e745374617475733d010008706572696f643d270100012701000b73616c617279426173653d01000a74696d657374616d703d01000b75736572416d6f756e743d0100077573657249643d01000b757365725374617475733d0100106a6176612f6c616e672f4f626a65637401000b456973436f6e747261637401000f6a6176612f6c616e672f436c61737301000d67657453696d706c654e616d65010006617070656e6401002d284c6a6176612f6c616e672f537472696e673b294c6a6176612f6c616e672f537472696e674275696c6465723b01004b284c6a6176612f6c616e672f4368617253657175656e63653b4c6a6176612f6c616e672f4368617253657175656e63653b4c6a6176612f6c616e672f4368617253657175656e63653b295601002d284c6a6176612f6c616e672f4f626a6563743b294c6a6176612f6c616e672f537472696e674275696c6465723b010003616464010032284c6a6176612f6c616e672f4368617253657175656e63653b294c6a6176612f7574696c2f537472696e674a6f696e65723b0021000f0023000000090002002400250000000200260027000000020028002900000002002a002700000002002b002900000002002c002d00000002002e002700000002002f0029000000020030002d00000014000100310032000100330000003300010001000000052ab70001b10000000200340000000a0002000001c7000401c800350000000c0001000000050036003900000001003a003b000100330000002f00010001000000052ab40002b0000000020034000000060001000001cb00350000000c0001000000050036003900000001003c003d000200330000003e00020002000000062a2bb50002b10000000200340000000a0002000001cf000501d000350000001600020000000600360039000000000006002400250001003e0000000501002400000001003f0040000100330000002f00010001000000052ab40003b0000000020034000000060001000001d300350000000c000100000005003600390000000100410042000200330000003e00020002000000062a2bb50003b10000000200340000000a0002000001d7000501d800350000001600020000000600360039000000000006002600270001003e000000050100260000000100430044000100330000002f00010001000000052ab40004b0000000020034000000060001000001db00350000000c000100000005003600390000000100450046000200330000003e00020002000000062a2bb50004b10000000200340000000a0002000001df000501e000350000001600020000000600360039000000000006002800290001003e000000050100280000000100470040000100330000002f00010001000000052ab40005b0000000020034000000060001000001e300350000000c000100000005003600390000000100480042000200330000003e00020002000000062a2bb50005b10000000200340000000a0002000001e7000501e800350000001600020000000600360039000000000006002a00270001003e0000000501002a0000000100490044000100330000002f00010001000000052ab40006b0000000020034000000060001000001eb00350000000c0001000000050036003900000001004a0046000200330000003e00020002000000062a2bb50006b10000000200340000000a0002000001ef000501f000350000001600020000000600360039000000000006002b00290001003e0000000501002b00000001004b004c000100330000002f00010001000000052ab40007b0000000020034000000060001000001f300350000000c0001000000050036003900000001004d004e000200330000003e00020002000000062a2bb50007b10000000200340000000a0002000001f7000501f800350000001600020000000600360039000000000006002c002d0001003e0000000501002c00000001004f0040000100330000002f00010001000000052ab40008b0000000020034000000060001000001fb00350000000c000100000005003600390000000100500042000200330000003e00020002000000062a2bb50008b10000000200340000000a0002000001ff0005020000350000001600020000000600360039000000000006002e00270001003e0000000501002e0000000100510044000100330000002f00010001000000052ab40009b00000000200340000000600010000020300350000000c000100000005003600390000000100520046000200330000003e00020002000000062a2bb50009b10000000200340000000a0002000002070005020800350000001600020000000600360039000000000006002f00290001003e0000000501002f000000010053004c000100330000002f00010001000000052ab4000ab00000000200340000000600010000020b00350000000c00010000000500360039000000010054004e000200330000003e00020002000000062a2bb5000ab10000000200340000000a00020000020f00050210003500000016000200000006003600390000000000060030002d0001003e00000005010030000000010055003b0001003300000162000500010000010cbb000b59120cbb000d59b7000e120fb60010b600111212b60011b600131214b70015bb000d59b7000e1216b600112ab40009b60017b60013b60018bb000d59b7000e1219b600112ab40008b60017b60013b60018bb000d59b7000e121ab600112ab4000ab60017b60013b60018bb000d59b7000e121bb600112ab40002b60011121cb60011b60013b60018bb000d59b7000e121db600112ab40004b60017b60013b60018bb000d59b7000e121eb600112ab40003b60017b60013b60018bb000d59b7000e121fb600112ab40006b60017b60013b60018bb000d59b7000e1220b600112ab40005b60017b60013b60018bb000d59b7000e1221b600112ab40007b60017b60013b60018b60022b000000002003400000032000c000002140038021500510216006a02170088021800a1021900ba021a00d3021b00ec021c0105021d0108021e010b021400350000000c00010000010c0036003900000002005600000002005700380000000a0001000f006500370009cafebabe00000034002b0a0007001d09001e001f090006002009000600210a001e0022070024070025010006616d6f756e740100164c6a6176612f6d6174682f426967446563696d616c3b01000c667265657a65416d6f756e740100063c696e69743e010003282956010004436f646501000f4c696e654e756d6265725461626c650100124c6f63616c5661726961626c655461626c650100047468697301000742616c616e636501000c496e6e6572436c61737365730100154c456973436f6e74726163742442616c616e63653b010009676574416d6f756e7401001828294c6a6176612f6d6174682f426967446563696d616c3b01000f676574467265657a65416d6f756e7401000a61646442616c616e6365010019284c6a6176612f6d6174682f426967446563696d616c3b29560100104d6574686f64506172616d6574657273010010616464467265657a6542616c616e636501000a536f7572636546696c65010010456973436f6e74726163742e6a6176610c000b000c0700260c002700090c000800090c000a00090c0028002907002a010013456973436f6e74726163742442616c616e63650100106a6176612f6c616e672f4f626a6563740100146a6176612f6d6174682f426967446563696d616c0100045a45524f01000361646401002e284c6a6176612f6d6174682f426967446563696d616c3b294c6a6176612f6d6174682f426967446563696d616c3b01000b456973436f6e74726163740020000600070000000200020008000900000002000a0009000000050001000b000c0001000d0000004900020001000000132ab700012ab20002b500032ab20002b50004b100000002000e0000001200040000019e0004019f000b01a0001201a1000f0000000c0001000000130010001300000001001400150001000d0000002f00010001000000052ab40003b000000002000e000000060001000001a4000f0000000c0001000000050010001300000001001600150001000d0000002f00010001000000052ab40004b000000002000e000000060001000001a8000f0000000c0001000000050010001300000001001700180002000d00000045000300020000000d2a2ab400032bb60005b50003b100000002000e0000000a0002000001ac000c01ad000f0000001600020000000d0010001300000000000d00080009000100190000000501000800000001001a00180002000d00000045000300020000000d2a2ab400042bb60005b50004b100000002000e0000000a0002000001b0000c01b1000f0000001600020000000d0010001300000000000d00080009000100190000000501000800000002001b00000002001c00120000000a0001000600230011000a";
        List<byte[]> classBytes = PackageUtil.unPack(HexUtil.fromHexString(hexCode));
        Class classZ = ReflectUtil.getInstance().loadClass(contractName, classBytes.get(0));
        int i = 1;
        for(Class item : classZ.getDeclaredClasses()){
            Class tmp = ReflectUtil.getInstance().loadClass(item.getName(), classBytes.get(i++));
            System.out.println(tmp.getCanonicalName());
        }
        Map storage = new HashMap();
        ReflectUtil.getInstance().newInstance(classZ, Map.class,  storage);
    }

    @Test
    public void testDeployContract() throws Exception {
        String contractName = "EisContract";
        InputStream in = DeployContractTest.class.getResourceAsStream("/"+contractName+".class");
        byte[] byteData = ByteStreams.toByteArray(in);
        Class mainClass = ReflectUtil.getInstance().loadClass(contractName, byteData);

        Class[] classes = ObjectArrays.concat(mainClass, mainClass.getDeclaredClasses());
        byte[] bytes = PackageUtil.pack(classes);

        byte[] data = ByteArrayUtil.merge(DataWord.of(contractName.getBytes()).getData(), bytes);
        Transaction tx = new Transaction(address.getBytes(), null, BigInteger.ZERO, data);

        SignatureResult signatureResult = cryptoSuite.sign(cryptoSuite.hash(tx.toString()), cryptoKeyPair);

        String txJson = new ObjectMapper().writeValueAsString(tx);
//        HttpClientResult result = HttpClientUtils.doPost("http://127.0.0.1:8080/api/v1/tx/send?sig="+signatureResult.convertToString(), txJson);
//        log.debug("result: {}", result);
    }

    @Test
    public void testCallMethod() throws Exception {
        String contractAddress = "";
        String methodName = "deposit";
        Object[] params = new Object[]{

        };

        CallMethod callMethod = new CallMethod(methodName, params);
        byte[] data = new ObjectMapper().writeValueAsBytes(callMethod);

        Transaction tx = new Transaction(address.getBytes(), contractAddress.getBytes(), BigInteger.ZERO, data);

        SignatureResult signatureResult = cryptoSuite.sign(cryptoSuite.hash(tx.toString()), cryptoKeyPair);

        // 4. 发送请求至链平台
        String txJson = new ObjectMapper().writeValueAsString(tx);
//        HttpClientResult result = HttpClientUtils.doPost("http://127.0.0.1:8080/api/v1/tx/send?sig="+signatureResult.convertToString(), txJson);
//        System.out.println(result);
    }
}
